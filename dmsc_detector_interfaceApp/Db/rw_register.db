# ESS Detector group FPGA demonstrator database
# $(SYS)    		= The System (DG)
# $(DEV) 			= The DEV name (FPGA)
# $(REG0) 			= Address Offset
# $(SFX) 			= register suffix
# $(COM)			= COM port for stream DEV
# $(PRO) 			= stream DEV protocol filename
# $(DEFAULT=0)    = the default value
# $(MIN=0)    = the minimum allowable value
# $(MAX=0)    = the maximum allowable value

## Communication Records ###

record(longout, "$(SYS)-$(DEV):$(SFX)-SP"){
  field(VAL,   "$(DEFAULT=0)")
  field(DRVL, "$(MIN=0)")
  field(DRVH, "$(MAX=0)")
  field(FLNK, "$(SYS)-$(DEV):$(SFX)-WR")
  info(autosaveFields_pass0, "VAL")
  field(PINI, "1")
}

record(longin, "$(SYS)-$(DEV):$(SFX)-OFF"){
    field(DESC, "signed address offset")
    field(VAL, "$(REG0)")
}

record(bo, "$(SYS)-$(DEV):$(SFX)-WR"){

  field(DESC, "$(SFX) write Packets")
  field(DTYP, "stream")
  field(OUT, "@$(PRO) writeRegister($(SYS)-$(DEV),$(SFX)-OFF,$(SFX)-SP) $(COM)")
  field(FLNK, "$(SYS)-$(DEV):$(SFX)-RBV")
}

record(longin, "$(SYS)-$(DEV):$(SFX)-RBV"){

  field(DTYP, "stream")
  field(INP, "@$(PRO) readRegister($(SYS)-$(DEV),$(SFX)-OFF) $(COM)")

}

