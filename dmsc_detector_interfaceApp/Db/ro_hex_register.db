# ESS Detector group FPGA demonstrator database
# $(SYS)    		= The System (DG)
# $(DEV) 			= The DEV name (FPGA)
# $(REG)      = Register name
# $(DESC)     = Register description
# $(OFF) 			= register offset
# $(COM)			= COM port for stream DEV
# $(SCAN)     = Scan setting for register

record(longin, "$(SYS)-$(DEV):$(REG)-OFF") {
  field(VAL, "$(OFF)")
}

record(longin, "$(SYS)-$(DEV):$(REG)-RAW-RBV") {
  field(DESC, "(RAW) $(DESC)")
  field(DTYP, "stream")
  field(INP, "@ics-dg.proto readRegister($(SYS)-$(DEV),$(REG)-OFF) $(COM)")
  field(PINI, "1")
  field(SCAN, "$(SCAN)")
  field(FLNK, "$(SYS)-$(DEV):$(REG)-CALC-HEX-STR")
}

record(aSub,"$(SYS)-$(DEV):$(REG)-CALC-HEX-STR")
{
  field(SNAM,"generateHexString")
  field(FTA,"LONG")
  field(NOA,"1")
  field(INPA,"$(SYS)-$(DEV):$(REG)-RAW-RBV NPP")
  field(FTVA, "STRING")
  field(OUTA, "$(SYS)-$(DEV):$(REG)-RBV PP")
  field(NOVA, "1")
}

record(stringin, "$(SYS)-$(DEV):$(REG)-RBV") {
  field(DESC, "$(DESC)")
  field(VAL, "")
  field(PINI, "NO")
}
