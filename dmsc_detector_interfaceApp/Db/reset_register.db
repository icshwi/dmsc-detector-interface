# ESS Detector group FPGA demonstrator database
# $(SYS)    	= The System (DG)
# $(DEV) 	= The DEV name (FPGA)
# $(OFF) = register offset
# $(COM)	= COM port for stream DEV



record(bo, "$(SYS)-$(DEV):RST-CMD"){
	field(DESC, "Reset FPGA SP")
	field(VAL, "1")
	field(OUT, "$(SYS)-$(DEV):RST-SP PP")
}

record(bo, "$(SYS)-$(DEV):ENA-CMD"){
	field(DESC, "Enable FPGA SP")
	field(VAL, "0")
	field(OUT, "$(SYS)-$(DEV):RST-SP PP")
}

record(seq, "$(SYS)-$(DEV):RST-ENA-CMD"){
	field(DESC, "Reset, Enable FPGA SP")
	field(DOL1, "1")
	field(LNK1, "$(SYS)-$(DEV):RST-SP PP")
	field(DOL2, "0")
	field(DLY2, "0.2")
	field(LNK2, "$(SYS)-$(DEV):RST-SP PP")
}


record(mbbo, "$(SYS)-$(DEV):RST-SP"){
	field(DESC, "Reset FPGA SP")
	field(ZRST, "Enable")
	field(ONST, "Reset")
	field(ZRVL, "0")
	field(ONVL, "18")
	field(DTYP, "Raw Soft Channel")
	field(OUT, "$(SYS)-$(DEV):RST-WR PP")
	info(autosaveFields_pass0, "VAL")
	field(PINI, "1")
	
}

record(longout, "$(SYS)-$(DEV):RST-WR"){
	field(DESC, "Write to Reset Vector")
	field(DTYP, "stream")
	field(OUT, "@ics-dg.proto writeRegister($(SYS)-$(DEV),RST-OFF,RST-WR) $(COM)")
	field(FLNK, "$(SYS)-$(DEV):STATUS2-RBV")
}



record(longin, "$(SYS)-$(DEV):RST-OFF") {
  field(VAL, $(OFF))
}


