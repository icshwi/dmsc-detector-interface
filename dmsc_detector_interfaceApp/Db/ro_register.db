# ESS Detector group FPGA demonstrator database
# $(SYS)    		= The System (DG)
# $(DEV) 			= The DEV name (FPGA)
# $(REG) 			= name of register
# $(OFF) 			= register offset
# $(COM)			= COM port for stream DEV
# $(PRO) 			= stream DEV protocol filename
# $(SCAN_EVNT) 		= Event number that record will be processed on. 


## Communication Records ###



record(longin, "$(SYS)-$(DEV):$(REG)-OFF") {
  field(VAL, "$(OFF)")
}


record(longin, "$(SYS)-$(DEV):$(REG)-RBV"){

  field(DTYP, "stream")
  field(INP, "@$(PRO) readRegister($(SYS)-$(DEV),$(REG)-OFF) $(COM)")
  field(PINI, "1")
}


record(calc, "$(SYS,undefined)-$(DEV,undefined):$(REG)-Cnt-RBV") {
  field(CALC, "A+1")
  field(INPA, "$(SYS,undefined)-$(DEV,undefined):$(REG)-Cnt-RBV NPP")
  field(SCAN, "Event")
  field(EVNT, "$(SCAN_EVNT)")
  field(FLNK, "$(SYS)-$(DEV):$(REG)-RBV")
}

